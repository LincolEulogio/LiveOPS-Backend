# LiveOPS Backend Deployment Plan (Render + Vercel)

This document details the exact configuration to deploy the backend on **Render** and connect it to your frontend on **Vercel**.

## 1. Backend: Render Configuration

I have added a `render.yaml` file to the backend. This file allows for a "Blueprint" deployment, which automates the creation of both the Web Service and the Database.

### Deployment Steps

1. Push your code to GitHub (ensure the `backend` folder is in the root or you configure the specific directory).
2. Log in to [Render.com](https://render.com).
3. Click **"New +"** and select **"Blueprint"**.
4. Connect your GitHub repository.
5. Render will detect the `render.yaml` and show you the resources it will create (Web Service + PostgreSQL).
6. Click **"Apply"**.

---

## 2. Environment Variables for Render

While the `render.yaml` handles most variables, you must manually add or check these in the Render Dashboard (Web Service -> Environment):

| Variable | Value / Source |
| :--- | :--- |
| `DATABASE_URL` | Auto-generated by Render |
| `JWT_SECRET` | Auto-generated or set your own |
| `CORS_ORIGIN` | `https://live-ops-frontend.vercel.app` |
| `VAPID_PUBLIC_KEY` | `BMVX7sGJ6yKnWtxgqwifxect6rbXJRDGv8oNRe1iW0bhJ5D0GsBz_97rGIVI3n4dF1PSrsYRiZXGvkfoyJnAwco` |
| `VAPID_PRIVATE_KEY` | `bQWW_edOxef-otE1kun_3BPqXeWP1Ajl6RUJSqYjH70` |
| `VAPID_EMAIL` | `admin@liveops.com` |

---

## 3. Frontend: Vercel Configuration

Update the environment variables in your Vercel Project (**Settings -> Environment Variables**):

1. **`NEXT_PUBLIC_API_URL`**: Set this to your Render URL (found in the Render dashboard) followed by `/api/v1`.
   * *Example:* `https://liveops-backend.onrender.com/api/v1`
2. **`NEXT_PUBLIC_WS_URL`**: Set this to the base Render URL.
   * *Example:* `https://liveops-backend.onrender.com`
3. **`NEXT_PUBLIC_VAPID_PUBLIC_KEY`**: `BMVX7sGJ6yKnWtxgqwifxect6rbXJRDGv8oNRe1iW0bhJ5D0GsBz_97rGIVI3n4dF1PSrsYRiZXGvkfoyJnAwco`

---

## 4. Final Verification

1. **Database**: Render will run `npx prisma migrate deploy` automatically (as configured in `package.json`).
2. **CORS**: Check that the Render URL shows "Backend is running" when you visit it in the browser.
3. **App**: Login to `https://live-ops-frontend.vercel.app/` and verify that data is fetching from the Render backend.
